{% extends 'base.html' %}
{% load static %}
{% block title %}cart{% endblock title %}
  

{% block main-content %}
<style>
    ._p-qty .decrease_ {
    position: relative;
    right: -5px;
    top: 3px;
}

._p-qty .increase_ {
    position: relative;
    top: 3px;
    left: -5px;
}
</style>
<div class="container my-5">
    <div class="row">
        
        {% if cart %}
        <h1 class="text-center mb-5">Shopping Cart</h1>
        <div class="col-sm-8">
            <div class="card">
                <div class="card-body">
                   
                    {% for item in cart %}
                   
                    <div class="row product-data">
                        <div class="col-sm-3 text-center align-self-center">
                            <img src="{{item.product.food_image.url }}"  class="img-fluid img-thumbnail shadow-sm" height="150" width="150">
                        </div>
                        <div class="col-sm-9">
                            <div>
                <h5>{{item.product.name}}</h5>
                <p class="mb-2 text-muted small">{{item.product.description}}</p>
                <div class="my-3">
                    <input type="hidden" class="prod_id" value="{{item.product_id}}">
                    {% csrf_token %}

                    <label for="quantity">Quantity:</label>
                    
                      <a class="minus-cart btn" pid={{item.product.id}}>-</a>
                      <!-- <input type="text" name="quantity" class="form-control qty-input text-cente" value="{{item.product_qty}}"> -->
                      <span id="quantity">{{item.product_qty}}</span>
                      <a class="plus-cart btn" pid={{item.product.id}}>+</a>
                    </div>
                   
                    <div class="d-flex justify-content-between">
                        <a href="{% url 'removeitem' item.product.id %}" class="remove-card btn btn-sm btn-secondary mr-3" pid={{item.product.id}}>Remove Item</a>
                        <p class="mb-0">
                            <span><strong>Rs.{{item.product.discount_price}}</strong></span>
                        </p>
                    </div>
                </div>
                        </div>
                    </div>
                    <hr class="text-muted">
                    {% endfor %}
                </div>
            </div>
        </div>
   <div class="col-sm-4">
    <div class="card">
        <div class="card-body">
            <h3>The Total Amount of</h3>
            <ul class="list-group">
                <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 pb-0">Amount <span id="amount">Rs.{{amount}}</span></li>
                <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0">Delivery <span>Rs. 40.00</span></li>
                <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 mb-3">
                    <div>
                        <strong>Total</strong>
                        <small>(Including GST)</small>
                    </div>
                    <span id="totalamount"><strong>Rs.{{totalamount}}</strong></span>
                </li>
            
            </ul>
            <div class="d-grid"><a href="{% url 'checkout' %}" class="btn btn-primary">Place Order</a></div>
        </div>
    </div>
   </div>
{% else %}
<h1 class="text-center mb-5">Cart is Empty</h1>
{% endif %}

</div>
</div>
<script src="{% static 'js/myscript.js' %}"></script>
<script src="{% static 'js/all.min.js' %}"></script>
<script src="{% static 'js/owl.carousel.min' %}"></script>
<!-- <script>
(function ($) {
    $('.changeQuantity').click(function(e){
        e.preventDefault();
        var product_id = $(this).closest('.product-data').find('.prod_id').val();
        var product_qty = $(this).closest('.product_data').find('.qty-input').val();
        var token = $('input[name=csrfmiddlewaretoken]').val();
        $ajax({
            method:'POST',
            url:'/update-cart',
            data:{
                'product_id' : product_id,
                'quantity' : product_qty,
                csrfmiddlewaretoekn:token
         },
            success:function(response){
                alertify.success(reponsive.status)
            }
        });
    });

    })(jQuery);
</script> -->


{% endblock main-content %}